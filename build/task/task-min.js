YUI.add("task",function(e){var t=e.Lang,n=e.Array,r=e.Object;e.Task=e.Base.create("task",e.TreeModel,[],{idAttribute:"_id",initializer:function(t){if(t&&t.clientId)this._set("clientId",t.clientId);else{var n=this.constructor.NAME+"_"+ ++e.Task.lastCount;this._set("clientId",n)}},_stringToDate:function(n){if(t.isDate(n))return n;var r=e.DataType.Date.parse(n);return r},serialize:function(){var e=this.toJSON(),t=e.resources;return e.resources=[],n.each(t,function(t){e.resources.push(t.get("clientId"))}),e},toJSON:function(){var e=this.getAttrs();return delete e.destroyed,delete e.initialized,this.idAttribute!=="id"&&delete e.id,e}},{ATTRS:{name:{},startDate:{setter:"_stringToDate"},endDate:{setter:"_stringToDate"},isFixedDuration:{value:!1},work:{value:8,setter:function(e){if(t.isNumber(e))return e;if(t.isString(e)){var n=parseInt(e,10);return t.isNumber(n)?n:0}}},duration:{},clientId:{valueFn:undefined},predecessors:{setter:function(e){var i=this.lists[0],s=this,o=i.indexOf(s);if(t.isString(e)){e=e.trim();if(e.length>0){var u=e.split(";"),a={};return n.each(u,function(e){e=e.trim();var t=parseInt(e,10),n=i.item(t-1),s,u;if(t-1===o)return;if(n){var f=t+"";f===e?s="FS":s=e.substring(f.length),u=n.get("clientId"),r.hasKey(a,s)||(a[s]={}),u&&(a[s][u]=u)}}),a}return{}}if(t.isObject(e))return e}},successors:{},resources:{setter:function(r){if(!r)return;return t.isString(r[0])?n.map(r,function(t){return e.Task.resources.getByClientId(t)}):r}},position:{value:-1},_id:{}}})});
