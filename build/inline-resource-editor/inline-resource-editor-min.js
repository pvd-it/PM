YUI.add("inline-resource-editor",function(e){var t=13,n=27,r=e.Lang;e.InlineResourceEditor=e.Base.create("inlineEditor",e.Widget,[e.WidgetPosition,e.WidgetStack,e.WidgetPositionAlign],{initializer:function(e){var t=this;t.resultListLocator=e.resultListLocator},renderUI:function(){var t=this,n=this.get("contentBox"),r=this.get("resources"),i=this.get("listToEdit");n.addClass("popover bottom yui3-skin-sam").append('<div class="arrow"></div><h3 class="popover-title">Choose Resources</h3><div class="popover-content"><div class="editorContainer"></div><div class="btn-toolbar"><div class="btn-group"><button class="btn btn-small btn-primary save">Save</button></div><div class="btn-group"><button class="btn btn-small btn-warning cancel">Cancel</button></div></div></div>'),this.lb=new e.ListBuilder({width:"250px",height:"auto",listToEdit:i,resultTextLocator:function(e){return e.get("name")},resultListLocator:t.resultListLocator,source:r}),this.lb.render(n.one(".editorContainer"))},bindUI:function(){var r=this.get("boundingBox"),i=this;r.delegate("click",e.bind(i._doDone,i),".save"),r.delegate("click",e.bind(i._doCancel,i),".cancel"),i.lb._inputNode.on("keydown",this._onInputKey,this),i.lb.ac._keysVisible[t]=function(e){e.acHandled=!0,this._keyEnter(e)},i.lb.ac._keysVisible[n]=function(e){e.acHandled=!0,this._keyEsc(e)}},_onInputKey:function(e){var r=this;e.acHandled||(e.keyCode===t?r._doDone():e.keyCode===n&&r._doCancel())},show:function(t,n){var i=this;r.isArray(n)&&(n=n.slice(0)),i.lb.set("listToEdit",n),i.lb.get("itemsAdded").length=0,i.lb.get("itemsRemoved").length=0,i.set("visible",!0),i.align(t,[e.WidgetPositionAlign.BR,e.WidgetPositionAlign.BL]),i.lb._inputNode.focus()},_onEscEnter:function(e){e.keyCode===27?this._doCancel():e.keyCode===13&&this._doDone(),e.halt()},_doDone:function(){var e=this;e.hide(),e.fire("done",{value:e.lb.get("listToEdit"),itemsAdded:e.lb.get("itemsAdded"),itemsRemoved:e.lb.get("itemsRemoved")})},_doCancel:function(){this.hide(),this.fire("cancel")}},{ATTRS:{resources:{}}})});
