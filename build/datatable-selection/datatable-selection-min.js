YUI.add("datatable-selection",function(e){var t="activeRowIndex",n="activeColIndex",r="Change",i="selectionInProgress",s="selectionStart",o="selectionEnd",u=e.DataTableNavigate.prototype,a,f;e.DataTableSelection=e.Base.create("datatable",e.DataTableNavigate,[],{initializer:function(){var t=this;a=t.getClassName("selection","mask"),f=t.getClassName("selection","mask","active"),t.after(i+r,t._afterSelectionInProgressChange),t.after(o+r,t._afterSelectionEndChange),e.Do.after(t._afterRenderUISelection,t,"renderUI"),t.keyBindings=e.merge(t.keyBindings,{shift:{35:t.selectToLastColumn,36:t.selectToFirstColumn,37:t.selectLeft,38:t.selectUp,39:t.selectRight,40:t.selectDown},ctrlshift:{35:t.selectToLastCell,36:t.selectToFirstCell}})},moveToLastColumn:function(){var e=this;e.clearSelection(),u.moveToLastColumn.apply(e,arguments)},moveToFirstColumn:function(){var e=this;e.clearSelection(),u.moveToFirstColumn.apply(e,arguments)},moveLeft:function(){var e=this;e.clearSelection(),u.moveLeft.apply(e,arguments)},moveUp:function(){var e=this;e.clearSelection(),u.moveUp.apply(e,arguments)},moveRight:function(){var e=this;e.clearSelection(),u.moveRight.apply(e,arguments)},moveDown:function(){var e=this;e.clearSelection(),u.moveDown.apply(e,arguments)},moveToLastCell:function(){var e=this;e.clearSelection(),u.moveToLastCell.apply(e,arguments)},moveToFirstCell:function(){var e=this;e.clearSelection(),u.moveToFirstCell.apply(e,arguments)},_afterRenderUISelection:function(){var t=this,n=t.get("contentBox");t._selectionMask=e.Node.create('<div class="'+a+'"></div>'),n.append(t._selectionMask)},_afterSelectionInProgressChange:function(e){if(!e.newVal)this._uiClearSelection();else{var r=this.get(t),i=this.get(n);this.set(s,[r,i])}},_afterSelectionEndChange:function(e){this._uiSyncSelection()},clearSelection:function(){this.set(i,!1)},selectToFirstColumn:function(){var e=this;e._startSelection(),u.moveToFirstColumn.apply(e,arguments),e._doSelection()},selectToLastColumn:function(){var e=this;e._startSelection(),u.moveToLastColumn.apply(e,arguments),e._doSelection()},selectUp:function(){var e=this;e._startSelection(),u.moveUp.apply(e,arguments),e._doSelection()},selectDown:function(){var e=this;e._startSelection(),u.moveDown.apply(e,arguments),e._doSelection()},selectLeft:function(){var e=this;e._startSelection(),u.moveLeft.apply(e,arguments),e._doSelection()},selectRight:function(){var e=this;e._startSelection(),u.moveRight.apply(e,arguments),e._doSelection()},selectToFirstCell:function(){var e=this;e._startSelection(),u.moveToFirstCell.apply(e,arguments),e._doSelection()},selectToLastCell:function(){var e=this;e._startSelection(),u.moveToLastCell.apply(e,arguments),e._doSelection()},_startSelection:function(){var e=this,r=e.get(i);r||(e.set(i,!0),e.set(s,[e.get(t),e.get(n)]))},_doSelection:function(){var e=this.get(t),r=this.get(n);this.set(o,[e,r])},_uiClearSelection:function(){this._selectionMask.removeClass(f)},_computeSelectionRegion:function(){var e=this.get(s)[0],t=this.get(s)[1],n=this.get(o)[0],r=this.get(o)[1],i,u,a,f;return e>n?(i=n,u=e):(i=e,u=n),t>r?(a=r,f=t):(a=t,f=r),{startCell:[i,a],endCell:[u,f]}},_uiSyncSelection:function(){var e=this,t=e._computeSelectionRegion(),n=e.getCell(t.startCell),r=e.getCell(t.endCell),i=n.get("region"),s=r.get("region"),o=n.getXY(),u=s.right-i.left,a=s.bottom-i.top;e._selectionMask.addClass(f),e._selectionMask.setXY(o),e._selectionMask.setStyles({width:u,height:a})}},{ATTRS:{selectionStart:{},selectionEnd:{},selectionInProgress:{value:!1}}})});
