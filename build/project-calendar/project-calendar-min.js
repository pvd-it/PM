YUI.add("project-calendar",function(e){var t,n=e.Object,r=e.DataType.Date;t=function(){this.data={}},t.prototype={_getDateAsKey:function(e){return r.format(e,{format:"%Y%m%d"})},getNextWorkDay:function(e,t){var n=this,i;do e=r.addDays(e,1),i=n.isWorkDay(e);while(!i);return e},isWorkDay:function(e){var t=e.getDay(),n=this,r;r=n.WEEKENDS.indexOf(t);if(r<0){var i=n._getDateAsKey(e),s=n.HOLIDAYS||[];return s.indexOf(i)<0}return!1},calProjectSchedule:function(){},calcTaskEndDateWithResourceFromScratch:function(e){var t=e.get("clientId"),r=e.get("work"),i=e.get("startDate"),s=e.get("resources"),o=s&&s[0],u=o?o.get("clientId"):undefined,a=this,f,l,c,h;for(;;){startDateKey=a._getDateAsKey(i),f=a.data[startDateKey],f||(a.data[startDateKey]=f={});if(u){l=f[u];if(!l)l=f[u]={},h=a.MAX_HOURS_PER_DAY;else{var p=0;n.each(l,function(e){p+=e}),h=a.MAX_HOURS_PER_DAY-p}}else h=a.MAX_HOURS_PER_DAY,l={};c=a._calculateWork(r,h),c>0&&(l[t]=c,r-=c);if(!(r>0))break;i=a.getNextWorkDay(i)}return e.set("endDate",i,{silent:!0}),i},_calculateWork:function(e,t){return e<=t?e:t},MAX_HOURS_PER_DAY:8,WEEKENDS:[0,6]},e.ProjectCalendar=new t});
