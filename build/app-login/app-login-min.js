YUI.add("app-login",function(e){e.namespace("PMApp").Login=Login=function(){},Login.prototype={doLogin:function(t,n){var r={userId:t,password:n},i=e.JSON.stringify(r),s=this,o={method:"POST",headers:{"Content-Type":"application/json"},data:i,context:s,on:{success:s._loginSuccess,failure:s._loginFailure}};e.io("/login",o)},_loginFailure:function(t,n){n.status===401?e.fire("alert",{type:"error",message:"Invalid credentials. Please check and try again."}):n.status===400&&e.fire("alert",{type:"warning",message:'Looks like your session is messed up. Try <strong><a href="/logout">logging out</a></strong> and then back in'})},_loginSuccess:function(t,n){var r=e.JSON.parse(n.responseText);this.fire("loginSuccess",{user:r})}}});
