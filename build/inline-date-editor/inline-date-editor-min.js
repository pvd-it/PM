YUI.add("inline-date-editor",function(e){e.InlineDateEditor=e.Base.create("inlineEditor",e.Widget,[e.WidgetPosition,e.WidgetStack,e.WidgetPositionAlign],{renderUI:function(){var t=this.get("contentBox");t.addClass("popover bottom yui3-skin-sam").append('<div class="arrow"></div><h3 class="popover-title">Choose Date</h3><div class="popover-content"><div class="editorContainer"></div><div class="btn-toolbar"><div class="btn-group"><button class="btn btn-small btn-primary save">Save</button></div><div class="btn-group"><button class="btn btn-small btn-warning cancel">Cancel</button></div></div></div>'),this._calendar=(new e.Calendar({contentBox:t.one(".editorContainer"),width:"auto",showPrevMonth:!0,showNextMonth:!0,date:new Date})).render()},bindUI:function(){var t=this.get("boundingBox");t.on("key",e.bind(this._onEscEnter,this),"down:esc"),this._calendar.after("selectionChange",e.bind(this._doDone,this)),t.delegate("click",e.bind(this._doCancel,this),".cancel")},show:function(t,n){this.set("visible",!0),n&&this._calendar.set("date",n),this._calendar.show(),this.align(t,[e.WidgetPositionAlign.TL,e.WidgetPositionAlign.BL]);var r=this._calendar;n=n?n:"",r.focus()},_onEscEnter:function(e){e.keyCode===27?this._doCancel():e.keyCode===13&&this._doDone(),e.halt()},_doDone:function(e){this.hide(),this._calendar.hide();var t=e.newSelection[0];this.fire("done",{value:t})},_doCancel:function(e){this.hide(),this._calendar.hide(),this.fire("cancel")}},{})});
