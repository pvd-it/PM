<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>list-test</title>
		<meta name="author" content="pide" />
		<style type="text/css">
			body {
				font-family: Arial, Helvetica, sans-serif;
				font-size: 14px;
			}
			
			.fieldContainer {
				position: relative;
				margin-bottom: 1em;
			}
			
			.fieldContainer input {
				position: absolute;
				left: 12em;
			}
		</style>
	</head>
	<body class="yui3-skin-sam">
		<div class="fieldContainer">
			<label for="daysToAdd">Day(s) to add:</label>
			<input type="text" id="daysToAdd" />
		</div>
		<div class="fieldContainer">
			<label for="dayInWeek">Day in week (zero based):</label>
			<input type="text" id="dayInWeek" />
		</div>
		<div id="tools">
			<button id="save">Save</button>
			<button id="addRow">Add Row</button>
			<button id="addCol">Add Column</button>
			<button id="remCol">Remove Column</button>			
			<button id="remRow">Remove Row</button>
		</div>
		<script src="/YUI/3.5.0pr4/yui/yui.js"></script>
		<script>
			YUI({
				combine: false,
				filter: 'RAW',
				groups: {
					pm: {
						base: './',
						modules: {
							task: {
								path: 'task/task.js',
								requires: ['model', 'arraylist', 'arraylist-add']
							},
							
							'task-list': {
								path: 'task/task-list.js',
								requires: ['task', 'model-list']
							},
						}
					}
				}
			}).use('io-xdr', 'event', 'node', 'json', 'task', 'task-list', function(Y) {
				Y.one('#tools').delegate('click', function(e){
					switch (e.currentTarget.get('id')) {
						case 'save':
							var uri = 'http://localhost:3000/Hello',
								cfg = {
									method: 'POST',
									headers: {
								        'Content-Type': 'application/json',
								    },
									data: '{"a":1, "b": 2}',
									on: {
										start: function(transactionId, arguments){
											
										},
										
										complete: function(transactionId, response, arguments){
											Y.log(response.responseText);
										},
										
										success: function(transactionId, response, arguments){
											
										},
										
										failure: function(transactionId, response, arguments){
											Y.log('Failure: ' + response.statusText);
											Y.log('Failure: ' + response.status);
										},
										
										end: function(transactionId, arguments){
											
										}
									},
									
									xdr: {use: 'native', dataType: 'text'}
								};
								
							Y.io(uri, cfg);
							
							break;
						case 'addRow':
							var taskList = new Y.TaskList()
							taskList.add([
								{"clientId":"task_1","name":"hi","isFixedDuration":false,"work":8,"duration":1,"depthLevel":0,"children":["task_2"],"collapsed":false,"visible":true},
								{"clientId":"task_2","name":"hello","isFixedDuration":false,"work":8,"duration":1,"depthLevel":1,"parent":"task_1","children":["task_3"],"collapsed":false,"visible":true},
								{"clientId":"task_3","name":"how","isFixedDuration":false,"work":8,"duration":1,"depthLevel":2,"parent":"task_2","children":[],"collapsed":false,"visible":true}
							]);
							
							Y.log(Y.JSON.stringify(taskList.item(0).toJSON()));
							Y.log(Y.JSON.stringify(taskList.item(1).toJSON()));
							Y.log(Y.JSON.stringify(taskList.item(2).toJSON()));
							break;
							
						case 'addCol':
							var today = new Date(),
								n = parseInt(Y.one('#daysToAdd').get('value'), 10),
								day = parseInt(Y.one('#dayInWeek').get('value')),
								part1, part2, part3;
								    
							    part1 = n;
							    part2 = (day === 6 ? 2 : +!day);
							    part3 = (Math.floor((n - 1 + (day % 6 || 1)) / 5) * 2);
							    
							    //Y.log('part1: ' + part1);
							    Y.log('part2: ' + part2);
							    //Y.log('part3: ' + part3);
							break;
							
						case 'remCol':
							var currDate = new Date();
							Y.log(currDate.getDay());
							break;
					}
				}, 'button');
			});
		</script>
	</body>
</html>